{"ast":null,"code":"var _jsxFileName = \"/home/andrei/Desktop/facultate sem4/ISS/frontend/src/components/programmer-page/programmerPage.js\",\n  _s = $RefreshSig$();\nimport \"./programmerPage.css\";\nimport { useEffect, useState } from \"react\";\nimport Bug from \"../tester-page/components/bug-component/Bug\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst computeUri = isUnresolvedBugs => {\n  if (isUnresolvedBugs) {\n    return \"http://localhost:8080/api/v1/bugs?status=UNSOLVED\";\n  } else return `http://localhost:8080/api/v1/bugs`;\n};\nconst ProgrammerPage = () => {\n  _s();\n  const token = \"Bearer \" + sessionStorage.getItem(\"authToken\");\n  const [unresolvedBugs, setUnresolvedBugs] = useState(null);\n  const [assignedBugs, setAssignedBugs] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const removeBugWithIdFromUnresolvedBug = bugId => {\n    setUnresolvedBugs(prevState => {\n      const newBugs = prevState.filter(bug => bug.id !== bugId);\n      return newBugs;\n    });\n  };\n  const assignBugToProgrammer = async bugId => {\n    console.log(\"Marked for solving\");\n    const response = await fetch(`http://localhost:8080/api/v1/bugs/${bugId}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n      }\n    });\n    if (response.status === 200) {\n      const updatedBug = await response.json();\n      await removeBugWithIdFromUnresolvedBug(bugId);\n      setAssignedBugs(prevState => {\n        const newBugs = [...prevState];\n        newBugs.push(updatedBug);\n        return newBugs;\n      });\n    } else {\n      const error = await response.json();\n      console.log(error);\n    }\n  };\n  const getAllBugs = async function () {\n    let isUnresolvedBugs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    const uri = computeUri(isUnresolvedBugs);\n    const response = await fetch(uri, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n      }\n    });\n    if (response.status === 200) {\n      const data = await response.json();\n      console.log(data);\n      return data;\n    }\n    return null;\n  };\n  useEffect(() => {\n    async function fetchUnresolvedBugs() {\n      const bugsFromResponse = await getAllBugs();\n      if (bugsFromResponse !== null) {\n        setUnresolvedBugs(bugsFromResponse);\n      }\n    }\n    async function fetchAssignedBugs() {\n      const bugsFromResponse = await getAllBugs(false);\n      if (bugsFromResponse !== null) {\n        setAssignedBugs(bugsFromResponse);\n      }\n    }\n    fetchUnresolvedBugs();\n    fetchAssignedBugs();\n    const interval = setInterval(async () => {\n      await fetchUnresolvedBugs();\n      await fetchAssignedBugs();\n    }, 3000);\n    return () => clearInterval(interval);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"programmer-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"bugs-view\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bugs-container\",\n        children: unresolvedBugs && unresolvedBugs.map(bug => /*#__PURE__*/_jsxDEV(Bug, {\n          id: bug.id,\n          bugName: bug.name,\n          description: bug.description,\n          priority: bug.priority,\n          status: bug.status,\n          postDate: bug.postDate,\n          buttonProps: {\n            onButtonClick: () => assignBugToProgrammer(bug.id),\n            buttonValue: \"Mark for solving\"\n          }\n        }, bug.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bugs-container\",\n        children: assignedBugs && assignedBugs.map(bug => /*#__PURE__*/_jsxDEV(Bug, {\n          id: bug.id,\n          bugName: bug.name,\n          description: bug.description,\n          priority: bug.priority,\n          status: bug.status,\n          postDate: bug.postDate\n        }, bug.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 12\n  }, this);\n};\n_s(ProgrammerPage, \"I11YxXYyz5pTjXZFcUUd1IJEDAM=\");\n_c = ProgrammerPage;\nexport default ProgrammerPage;\nvar _c;\n$RefreshReg$(_c, \"ProgrammerPage\");","map":{"version":3,"names":["useEffect","useState","Bug","jsxDEV","_jsxDEV","computeUri","isUnresolvedBugs","ProgrammerPage","_s","token","sessionStorage","getItem","unresolvedBugs","setUnresolvedBugs","assignedBugs","setAssignedBugs","errorMessage","setErrorMessage","removeBugWithIdFromUnresolvedBug","bugId","prevState","newBugs","filter","bug","id","assignBugToProgrammer","console","log","response","fetch","method","headers","status","updatedBug","json","push","error","getAllBugs","arguments","length","undefined","uri","data","fetchUnresolvedBugs","bugsFromResponse","fetchAssignedBugs","interval","setInterval","clearInterval","children","className","map","bugName","name","description","priority","postDate","buttonProps","onButtonClick","buttonValue","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/andrei/Desktop/facultate sem4/ISS/frontend/src/components/programmer-page/programmerPage.js"],"sourcesContent":["import \"./programmerPage.css\"\nimport {useEffect, useState} from \"react\";\nimport Bug from \"../tester-page/components/bug-component/Bug\";\n\nconst computeUri = (isUnresolvedBugs) => {\n    if (isUnresolvedBugs) {\n        return \"http://localhost:8080/api/v1/bugs?status=UNSOLVED\"\n    } else return `http://localhost:8080/api/v1/bugs`\n}\n\nconst ProgrammerPage = () => {\n    const token = \"Bearer \" + sessionStorage.getItem(\"authToken\")\n    const [unresolvedBugs, setUnresolvedBugs] = useState(null)\n    const [assignedBugs, setAssignedBugs] = useState(null)\n    const [errorMessage, setErrorMessage] = useState(null)\n\n\n    const removeBugWithIdFromUnresolvedBug = (bugId) => {\n        setUnresolvedBugs(prevState => {\n            const newBugs = prevState.filter(bug => bug.id !== bugId)\n            return newBugs\n        })\n    }\n    const assignBugToProgrammer = async (bugId) => {\n        console.log(\"Marked for solving\")\n        const response = await fetch(`http://localhost:8080/api/v1/bugs/${bugId}`,\n            {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": token\n                }\n            })\n        if (response.status === 200) {\n            const updatedBug = await response.json()\n\n            await removeBugWithIdFromUnresolvedBug(bugId)\n\n            setAssignedBugs(prevState => {\n                const newBugs = [...prevState]\n                newBugs.push(updatedBug)\n                return newBugs\n            })\n        }\n        else{\n            const error = await response.json()\n            console.log(error)\n        }\n    }\n\n    const getAllBugs = async (isUnresolvedBugs = true) => {\n        const uri = computeUri(isUnresolvedBugs)\n\n        const response = await fetch(uri,\n            {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": token\n                }\n            })\n\n        if (response.status === 200) {\n            const data = await response.json()\n            console.log(data)\n            return data\n        }\n        return null\n    }\n\n    useEffect(() => {\n        async function fetchUnresolvedBugs() {\n            const bugsFromResponse = await getAllBugs()\n            if (bugsFromResponse !== null) {\n                setUnresolvedBugs(bugsFromResponse)\n            }\n        }\n\n        async function fetchAssignedBugs() {\n            const bugsFromResponse = await getAllBugs(false)\n            if (bugsFromResponse !== null) {\n                setAssignedBugs(bugsFromResponse)\n            }\n        }\n\n        fetchUnresolvedBugs()\n        fetchAssignedBugs()\n\n        const interval = setInterval(async () => {\n            await fetchUnresolvedBugs()\n            await fetchAssignedBugs()\n\n        }, 3000)\n        return () => clearInterval(interval)\n\n    }, [])\n\n    return <div id={\"programmer-container\"}>\n        <div id={\"bugs-view\"}>\n            <div className={\"bugs-container\"}>\n                {unresolvedBugs && unresolvedBugs.map(bug =>\n                    <Bug key={bug.id} id={bug.id} bugName={bug.name} description={bug.description}\n                         priority={bug.priority}\n                         status={bug.status}\n                         postDate={bug.postDate}\n                         buttonProps={{\n                             onButtonClick: () => assignBugToProgrammer(bug.id),\n                             buttonValue: \"Mark for solving\"\n                         }}\n                    >\n                    </Bug>\n                )}\n            </div>\n            <div className={\"bugs-container\"}>\n                {assignedBugs && assignedBugs.map(bug =>\n                    <Bug key={bug.id} id={bug.id} bugName={bug.name} description={bug.description}\n                         priority={bug.priority}\n                         status={bug.status} postDate={bug.postDate}>\n\n                    </Bug>\n                )}\n            </div>\n        </div>\n\n    </div>\n}\n\nexport default ProgrammerPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}