{"ast":null,"code":"var _jsxFileName = \"/home/andrei/Desktop/facultate sem4/ISS/frontend/src/components/tester-page/TesterPage.js\",\n  _s = $RefreshSig$();\nimport \"./TesterPage.css\";\nimport Bug from \"./components/bug-component/Bug\";\nimport BugForm from \"./components/bug-component/add-bug-component/BugForm\";\nimport { useEffect, useState } from \"react\";\nimport { Form } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TesterPage = () => {\n  _s();\n  const token = \"Bearer \" + sessionStorage.getItem(\"authToken\");\n  const [bugs, setBugs] = useState(null);\n  const [areBugsOrdered, setAreBugsOrdered] = useState(false);\n  const getAllBugs = async () => {\n    const response = await fetch(\"http://localhost:8080/api/v1/bugs\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n      }\n    });\n    if (response.status === 200) {\n      const data = await response.json();\n      console.log(data);\n      return data;\n    }\n    return null;\n  };\n  const deleteBug = async bugId => {\n    const response = await fetch(`http://localhost:8080/api/v1/bugs/${bugId}`, {\n      method: \"DELETE\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": token\n      }\n    });\n    if (response.status === 200) {\n      setBugs(prevState => prevState.filter(bug => bug.id !== bugId));\n    }\n  };\n  useEffect(() => {\n    async function fetchData() {\n      const bugsFromResponse = await getAllBugs();\n      if (bugsFromResponse !== null) {\n        setBugs(bugsFromResponse);\n      }\n    }\n    fetchData();\n    const interval = setInterval(async () => {\n      await fetchData();\n    }, 10000);\n    return () => clearInterval(interval);\n  }, []);\n  const sortBugsByPriority = bugs => {\n    return bugs.sort((b1, b2) => priorityMap[b2.priority] - priorityMap[b1.priority]);\n  };\n  const addBugToList = bug => {\n    setBugs(prevState => {\n      const bugs = [...prevState];\n      bugs.push(bug);\n      console.log(bugs);\n      return bugs;\n    });\n  };\n  const onAreOrderedChecked = () => {\n    setAreBugsOrdered(prevState => !prevState);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"tester-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"bugs-container\",\n      children: bugs && bugs.map(bug => {\n        const testerUsername = sessionStorage.getItem(\"username\");\n        let bugDeleteBtnProperties = undefined;\n        if (testerUsername === bug.bugPosterUsername) {\n          bugDeleteBtnProperties = {\n            onButtonClick: () => deleteBug(bug.id),\n            buttonValue: \"Delete\"\n          };\n        }\n        return /*#__PURE__*/_jsxDEV(Bug, {\n          id: bug.id,\n          bugName: bug.name,\n          description: bug.description,\n          priority: bug.priority,\n          status: bug.status,\n          postDate: bug.postDate,\n          buttonProps: bugDeleteBtnProperties\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 28\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: \"10vw\",\n        marginLeft: \"10vw\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        children: /*#__PURE__*/_jsxDEV(Form.Check, {\n          label: \"Order by priority\",\n          onChange: onAreOrderedChecked\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(BugForm, {\n      onSuccessfullyAddBug: addBugToList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 12\n  }, this);\n};\n_s(TesterPage, \"pQALVMsaPz0nJxBC38u0qkZaQU0=\");\n_c = TesterPage;\nexport default TesterPage;\nvar _c;\n$RefreshReg$(_c, \"TesterPage\");","map":{"version":3,"names":["Bug","BugForm","useEffect","useState","Form","jsxDEV","_jsxDEV","TesterPage","_s","token","sessionStorage","getItem","bugs","setBugs","areBugsOrdered","setAreBugsOrdered","getAllBugs","response","fetch","method","headers","status","data","json","console","log","deleteBug","bugId","prevState","filter","bug","id","fetchData","bugsFromResponse","interval","setInterval","clearInterval","sortBugsByPriority","sort","b1","b2","priorityMap","priority","addBugToList","push","onAreOrderedChecked","children","map","testerUsername","bugDeleteBtnProperties","undefined","bugPosterUsername","onButtonClick","buttonValue","bugName","name","description","postDate","buttonProps","fileName","_jsxFileName","lineNumber","columnNumber","style","width","marginLeft","Check","label","onChange","onSuccessfullyAddBug","_c","$RefreshReg$"],"sources":["/home/andrei/Desktop/facultate sem4/ISS/frontend/src/components/tester-page/TesterPage.js"],"sourcesContent":["import \"./TesterPage.css\"\nimport Bug from \"./components/bug-component/Bug\";\nimport BugForm from \"./components/bug-component/add-bug-component/BugForm\";\nimport {useEffect, useState} from \"react\";\nimport {Form} from \"react-bootstrap\";\n\nconst TesterPage = () => {\n    const token = \"Bearer \" + sessionStorage.getItem(\"authToken\")\n    const [bugs, setBugs] = useState(null)\n    const [areBugsOrdered, setAreBugsOrdered] = useState(false)\n\n    const getAllBugs = async () => {\n        const response = await fetch(\"http://localhost:8080/api/v1/bugs\",\n            {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": token\n                }\n            })\n        if (response.status === 200) {\n            const data = await response.json()\n            console.log(data)\n            return data\n        }\n        return null\n    }\n\n\n    const deleteBug = async (bugId) => {\n        const response = await fetch(`http://localhost:8080/api/v1/bugs/${bugId}`,\n            {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    \"Authorization\": token\n                }\n\n            }\n        )\n        if (response.status === 200) {\n            setBugs(prevState => prevState.filter(bug => bug.id !== bugId))\n        }\n    }\n\n    useEffect(() => {\n        async function fetchData() {\n            const bugsFromResponse = await getAllBugs()\n            if (bugsFromResponse !== null) {\n                setBugs(bugsFromResponse)\n            }\n        }\n\n        fetchData()\n\n        const interval = setInterval(async () => {\n            await fetchData()\n        }, 10000)\n        return () => clearInterval(interval)\n\n    }, [])\n\n    const sortBugsByPriority = (bugs) => {\n        return bugs.sort((b1, b2) => priorityMap[b2.priority] - priorityMap[b1.priority])\n    }\n    const addBugToList = (bug) => {\n        setBugs(prevState => {\n            const bugs = [...prevState]\n            bugs.push(bug)\n            console.log(bugs)\n            return bugs\n        })\n    }\n    const onAreOrderedChecked = () => {\n        setAreBugsOrdered(prevState => !prevState)\n    }\n\n    return <div id={\"tester-container\"}>\n        <div id={\"bugs-container\"}>\n            {bugs && bugs.map(bug => {\n                    const testerUsername = sessionStorage.getItem(\"username\")\n                    let bugDeleteBtnProperties = undefined\n                    if (testerUsername === bug.bugPosterUsername) {\n                        bugDeleteBtnProperties = {\n                            onButtonClick: () => deleteBug(bug.id),\n                            buttonValue: \"Delete\"\n                        }\n                    }\n\n                    return <Bug id={bug.id} bugName={bug.name} description={bug.description}\n                                priority={bug.priority}\n                                status={bug.status} postDate={bug.postDate}\n                                buttonProps={bugDeleteBtnProperties}\n                    >\n                    </Bug>\n                }\n            )}\n        </div>\n        <div style={{width: \"10vw\", marginLeft: \"10vw\"}}>\n            <Form>\n                <Form.Check label={\"Order by priority\"} onChange={onAreOrderedChecked}></Form.Check>\n            </Form>\n        </div>\n        <BugForm onSuccessfullyAddBug={addBugToList}></BugForm>\n    </div>\n}\n\nexport default TesterPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}